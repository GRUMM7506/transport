<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Транспорт Душанбе</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Боковая панель с поиском -->
        <aside class="sidebar">
            <div class="search-panel">
                <h2 class="sidebar-title">Поиск остановки</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Введите название остановки..." autocomplete="off">
                </div>
                <div class="search-filters">
                    <button class="filter-btn active" data-type="all">Все</button>
                    <button class="filter-btn" data-type="bus">Автобус</button>
                    <button class="filter-btn" data-type="minibus">Маршрутка</button>
                </div>
            </div>
            
            <div class="search-results" id="searchResults">
                <div class="empty-state">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                        <circle cx="32" cy="32" r="30" stroke="#ddd" stroke-width="2"/>
                        <path d="M32 20v24M20 32h24" stroke="#ddd" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <p>Начните вводить название остановки</p>
                </div>
            </div>

            <div class="route-planner" id="routePlanner" style="display: none;">
                <div class="planner-header">
                    <h3>Построить маршрут</h3>
                    <button class="close-btn" onclick="closePlanner()">×</button>
                </div>
                <div class="planner-inputs">
                    <input type="text" id="fromInput" placeholder="Откуда">
                    <button class="swap-btn" onclick="swapPoints()">⇅</button>
                    <input type="text" id="toInput" placeholder="Куда">
                </div>
                <button class="build-route-btn" onclick="buildRoute()">Построить</button>
            </div>
        </aside>

        <!-- Основная область с картой -->
        <main class="map-container">
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Загрузка схемы транспорта...</p>
            </div>

            <svg id="transportMap" class="transport-map"></svg>
            
            <!-- Контролы масштабирования -->
            <div class="controls">
                <!-- КНОПКА СМЕНЫ ТЕМЫ -->
                <button class="control-btn" onclick="toggleTheme()" title="Сменить тему">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" id="themeIcon">
                        <path d="M10 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 14V4a6 6 0 1 1 0 12z"/>
                    </svg>
                </button>

                <!-- Кнопка настроек
                <button class="control-btn" onclick="openSettings()" title="Настройки">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm7-3a7.97 7.97 0 0 1-.9 3.8l2.1 1.6-1.5 2.6-2.5-1a7.97 7.97 0 0 1-3.4 1.2v2.5h-3v-2.5a7.97 7.97 0 0 1-3.4-1.2l-2.5 1-1.5-2.6 2.1-1.6A7.97 7.97 0 0 1 3 10c0-.9.15-1.8.4-2.6L1.3 6.8l1.5-2.6 2.5 1c.8-.7 1.8-1.2 2.9-1.4V2h3v2.5c1 .2 2 .7 2.9 1.4l2.5-1 1.5 2.6-2.1 1.6c.25.8.4 1.7.4 2.6z"/>
                    </svg> -->
                
                <button class="control-btn" onclick="zoomIn()" title="Приблизить">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 4v12M4 10h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <button class="control-btn" onclick="zoomOut()" title="Отдалить">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M4 10h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <button class="control-btn" onclick="resetView()" title="Сбросить">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
                        <circle cx="10" cy="10" r="2" fill="currentColor"/>
                    </svg>
                </button>
                <button class="control-btn" onclick="togglePlanner()" title="Построить маршрут">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <circle cx="5" cy="5" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                        <circle cx="15" cy="15" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path d="M7 7l6 6" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
            </div>

            <!-- Легенда маршрутов -->
            <div class="legend" id="legend">
                <div class="legend-header">
                    <h4>Маршруты</h4>
                    <button class="legend-toggle" onclick="toggleLegend()">−</button>
                </div>
                <div class="legend-content" id="legendContent">
                    <div class="legend-loading">Загрузка...</div>
                </div>
            </div>

            <!-- Информационная панель -->
            <div class="info-panel" id="infoPanel">
                <button class="info-close" onclick="closeInfo()">×</button>
                <h3 id="infoTitle"></h3>
                <div id="infoContent"></div>
            </div>
        </main>
    </div>

    <!-- Подключаем скрипты -->
    <script src="js/config.js"></script>
    <script src="js/data.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/map.js"></script>
    <script src="js/search.js"></script>
    <script src="js/router.js"></script>
    <script src="js/app.js"></script>
</body>
</html>